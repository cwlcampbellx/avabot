// JavaScript for the push-to-talk functionality
const pushToTalk = document.getElementById("push-to-talk");
let recording = false;
let recorder;

pushToTalk.addEventListener("mousedown", startRecording);
pushToTalk.addEventListener("mouseup", stopRecording);

function startRecording() {
  // Code to start recording audio using the Web Audio API
  recording = true;
}

function stopRecording() {
  // Code to stop recording audio and send it to the chatbot URL
  recording = false;
  // Code to send audio to chatbot URL and receive response
  fetch("https://beta.character.ai/chat?char=6HhWfeDjetnxESEcThlBQtEUo0O8YHcXyHqCgN7b2hY", {
    method: "POST",
    body: recorder // replace recorder with the recorded audio
  })
    .then(response => response.text())
    .then(responseText => {
      const response = document.getElementById("response");
      response.innerHTML = responseText;
    });
}

// JavaScript for the text input functionality
const textForm = document.querySelector("form");

textForm.addEventListener("submit", e => {
  e.preventDefault();
  const textInput = document.getElementById("text-input");
  // Code to send text to chatbot URL and receive response
  fetch("https://beta.character.ai/chat?char=6HhWfeDjetnxESEcThlBQtEUo0O8YHcXyHqCgN7b2hY", {
    method: "POST",
    body: textInput.value
  })
    .then(response => response.text())
    .then(responseText => {
      const response = document.getElementById("response");
      response.innerHTML = responseText;
    });
});
